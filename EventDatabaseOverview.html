
<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <!--
This HTML was auto-generated from MATLAB code.
To make changes, update the MATLAB code and republish this document.
      --><title>What Moves Markets?</title><meta name="generator" content="MATLAB 9.7"><link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"><meta name="DC.date" content="2021-11-23"><meta name="DC.source" content="EventDatabaseOverview.m"><style type="text/css">
html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}

html { min-height:100%; margin-bottom:1px; }
html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }
html body td { vertical-align:top; text-align:left; }

h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }
h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }
h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }

a { color:#005fce; text-decoration:none; }
a:hover { color:#005fce; text-decoration:underline; }
a:visited { color:#004aa0; text-decoration:none; }

p { padding:0px; margin:0px 0px 20px; }
img { padding:0px; margin:0px 0px 20px; border:none; }
p img, pre img, tt img, li img, h1 img, h2 img { margin-bottom:0px; } 

ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }
ul li { padding:0px; margin:0px 0px 7px 0px; }
ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }
ul li ol li { list-style:decimal; }
ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }
ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }
ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }
ol li ol li { list-style-type:lower-alpha; }
ol li ul { padding-top:7px; }
ol li ul li { list-style:square; }

.content { font-size:1.2em; line-height:140%; padding: 20px; }

pre, code { font-size:12px; }
tt { font-size: 1.2em; }
pre { margin:0px 0px 20px; }
pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }
pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }
pre.error { color:red; }

@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }

span.keyword { color:#0000FF }
span.comment { color:#228B22 }
span.string { color:#A020F0 }
span.untermstring { color:#B20000 }
span.syscmd { color:#B28C00 }

.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }
.footer p { margin:0px; }
.footer a { color:#878787; }
.footer a:hover { color:#878787; text-decoration:underline; }
.footer a:visited { color:#878787; }

table th { padding:7px 5px; text-align:left; vertical-align:middle; border: 1px solid #d6d4d4; font-weight:bold; }
table td { padding:7px 5px; text-align:left; vertical-align:top; border:1px solid #d6d4d4; }





  </style></head><body><div class="content"><h1>What Moves Markets?</h1><!--introduction--><p>This code gives a basic overview of the event database from the paper "What Moves Markets?" by Mark Kerssenfischer and Maik Schmeling</p><p>Notes:</p><div><ul><li>All intraday timestamps refer to GMT.</li><li>The database currently contains three types of events: 1) auctions (announcements and results; for the US and Germany; from the websites of the US Treasury and the German Finance Agency), 2) central bank announcements (for eight major central banks), and 3) ad hoc events (such as natural catastophies, rating events, etc.)</li><li>The database does currently not contain events from Bloomberg, such as macroeconomic data releases and auctions regarding France, Italy, Spain</li></ul></div><!--/introduction--><h2>Contents</h2><div><ul><li><a href="#2">Data Format</a></li><li><a href="#3">Event Categories</a></li><li><a href="#4">Event Sub-Categories</a></li><li><a href="#5">Central Bank Announcements</a></li><li><a href="#6">number of central bank events by intraday time</a></li></ul></div><h2 id="2">Data Format</h2><p>display first ten rows of event database</p><pre class="codeoutput">  10&times;6 timetable

       eventstart           eventend             type              subtype             subsubtype                             description                         scheduled
    ________________    ________________    ______________    _________________    __________________    _____________________________________________________    _________

    04.03.2002 16:30                 NaT    "Auction"         "US Announcement"    "Bill"                "CUSIP 912795JN2"                                          true   
    05.03.2002 05:00                 NaT    "Central Bank"    "BoJ"                "Minutes"             "Minutes on January 15/16 Meeting"                         true   
    05.03.2002 14:00                 NaT    "Central Bank"    "BoC"                "Press Release"       ""                                                         true   
    05.03.2002 18:00                 NaT    "Auction"         "US Result"          "Bill"                "CUSIP 912795JN2"                                          true   
    05.03.2002 22:30                 NaT    "Central Bank"    "RBA"                "Press Release"       ""                                                         true   
    06.03.2002 19:00                 NaT    "Central Bank"    "Fed"                "Beige Book"          "Beige Book Release"                                       true   
    07.03.2002 12:00                 NaT    "Central Bank"    "BoE"                "Press Release"       "MPD"                                                      true   
    07.03.2002 12:45                 NaT    "Central Bank"    "ECB"                "Press Release"       "GCM PR"                                                   true   
    07.03.2002 13:30    07.03.2002 14:08    "Central Bank"    "ECB"                "Press Conference"    "GCM PC"                                                   true   
    07.03.2002 15:00    07.03.2002 17:35    "Central Bank"    "Fed"                "Speech by Chair"     "Greenspan Senate Testimony (Monetary Policy Report)"      true   

</pre><h2 id="3">Event Categories</h2><p>number of monthly events for each category</p><img vspace="5" hspace="5" src="EventDatabaseOverview_01.png" alt=""> <h2 id="4">Event Sub-Categories</h2><p>number of quarterly events for each subcategory</p><img vspace="5" hspace="5" src="EventDatabaseOverview_02.png" alt=""> <img vspace="5" hspace="5" src="EventDatabaseOverview_03.png" alt=""> <img vspace="5" hspace="5" src="EventDatabaseOverview_04.png" alt=""> <h2 id="5">Central Bank Announcements</h2><p>number of quarterly events for each central bank</p><img vspace="5" hspace="5" src="EventDatabaseOverview_05.png" alt=""> <img vspace="5" hspace="5" src="EventDatabaseOverview_06.png" alt=""> <img vspace="5" hspace="5" src="EventDatabaseOverview_07.png" alt=""> <img vspace="5" hspace="5" src="EventDatabaseOverview_08.png" alt=""> <img vspace="5" hspace="5" src="EventDatabaseOverview_09.png" alt=""> <img vspace="5" hspace="5" src="EventDatabaseOverview_10.png" alt=""> <img vspace="5" hspace="5" src="EventDatabaseOverview_11.png" alt=""> <img vspace="5" hspace="5" src="EventDatabaseOverview_12.png" alt=""> <h2 id="6">number of central bank events by intraday time</h2><img vspace="5" hspace="5" src="EventDatabaseOverview_13.png" alt=""> <p class="footer"><br><a href="https://www.mathworks.com/products/matlab/">Published with MATLAB&reg; R2019b</a><br></p></div><!--
##### SOURCE BEGIN #####
%% What Moves Markets?
% This code gives a basic overview of the event database from
% the paper "What Moves Markets?" by Mark Kerssenfischer 
% and Maik Schmeling
%
% Notes:
%
% * All intraday timestamps refer to GMT.
% * The database currently contains three types of events: 1) auctions 
% (announcements and results; for the US and Germany; from the websites of 
% the US Treasury and the German Finance Agency), 2) central bank 
% announcements (for eight major central banks), and 3) ad hoc events 
% (such as natural catastophies, rating events, etc.)
% * The database does currently not contain events from Bloomberg, such as 
% macroeconomic data releases and auctions regarding France, Italy, Spain

%%
clear
% load event database
load('WhatMovesMarkets_eventdatabase.mat')

%ind = ~cellfun(@isempty,Tevents.description) & [false; diff(double(categorical(Tevents.type)))~=0];
%temp = head(Tevents(ind,:));
% temp = timetable2table(Tevents(1:10,:));
% temp.eventend = repmat({''},size(temp,1),1);
% temp.eventstart = cellstr(datestr(temp.eventstart,'dd.mm.yyyy HH:MM'));
% temp.eventend(~isnat(Tevents.eventend(1:10))) = cellstr(datestr(Tevents.eventend(~isnat(Tevents.eventend(1:10))),...    
%                                                 'dd.mm.yyyy HH:MM'));
% 
% temp2 = table2cell(temp);
% 
% fileID = fopen('./tablehead.tex','w');
% fprintf(fileID,'%s & %s & %s & %s & %s & %s & %s\\\\ \n',temp.Properties.VariableNames{:});
% formatSpec =   '%s & %s & %s & %s & %s & %s & %d\\\\ \n';
% for row = 1:size(temp2,1)
%     fprintf(fileID,formatSpec,temp2{row,:});
% end
% fclose(fileID);

%% Data Format
% display first ten rows of event database
display(Tevents(1:10,:));


%% Event Categories
% number of monthly events for each category
eventtypes = unique(Tevents.type);
hold on
for i=1:length(eventtypes)
    [ia,~,ic] = unique(dateshift(Tevents.eventstart(strcmp(Tevents.type,eventtypes{i})),'start','month'));
    plot(ia,accumarray(ic,1),'LineWidth',2)
    grid on
end
set(gcf,'Units','centimeters', 'Position', [0 0 17 9],'PaperUnits','centimeters','PaperSize',[17 9])
set(gca(), 'LooseInset', get(gca(), 'TightInset')+[0 -.05 .02 0]);
legend(eventtypes,'Location','SouthOutside','Orientation','Horizontal')

%% Event Sub-Categories
% number of quarterly events for each subcategory
subtypes = cell(1,length(eventtypes));
tempcol = lines(7);
tempcol(8,:) = repmat(.7,1,3);
for i=1:length(eventtypes)
    Tsubtyp = timetable('RowTimes',unique(dateshift(Tevents.eventstart,'start','quarter')));
    subtypes = unique(Tevents.subtype(strcmp(Tevents.type,eventtypes{i})));    
    for ii=1:length(subtypes)
        [ia,~,ic] = unique(dateshift(Tevents.eventstart(strcmp(Tevents.type,eventtypes{i}) & ...
            strcmp(Tevents.subtype,subtypes{ii})),'start','quarter'));
        Tsubtyp = outerjoin(Tsubtyp,array2timetable(accumarray(ic,1),'RowTimes',ia,'VariableNames',subtypes(ii)));
    end
    figure;
    h = bar(1:size(Tsubtyp,1),Tsubtyp{:,:},1,'stacked','LineStyle','none');
    set(h, {'FaceColor'}, num2cell(tempcol(1:length(subtypes),:),2));    
    grid on    
    % label all even years
    ind = find(Tsubtyp.Time.Month==1 & mod(Tsubtyp.Time.Year,2)==0);
    xticks(ind)
    xticklabels(Tsubtyp.Time.Year(ind))    
    legend(subtypes,'Location','EastOutside','NumColumns',1)
    title(sprintf('%s',eventtypes{i}))
    set(gcf,'Units','centimeters', 'Position', [0 0 17 9],'PaperUnits','centimeters','PaperSize',[17 9])
    set(gca(), 'LooseInset', get(gca(), 'TightInset')+[0 -.05 .02 0]);
end


%% Central Bank Announcements
% number of quarterly events for each central bank
cblist = unique(Tevents.subtype(strcmp(Tevents.type,'Central Bank')));
cblist = cblist([5 4 2 3 7 8 1 6]);

for i=1:length(cblist)
    Tcb = timetable('RowTimes',unique(dateshift(Tevents.eventstart,'start','quarter')));  
    subsubtypes = unique(Tevents.subsubtype(strcmp(Tevents.subtype,cblist{i})));    
    for ii=1:length(subsubtypes)        
        [ia,~,ic] = unique(dateshift(Tevents.eventstart(strcmp(Tevents.subtype,cblist{i}) & strcmp(Tevents.subsubtype,subsubtypes{ii})),'start','quarter'));
       
        Tcb = outerjoin(Tcb,array2timetable(accumarray(ic,1),'RowTimes',ia,'VariableNames',subsubtypes(ii)));
    end
    figure;    
    h = bar(1:size(Tcb,1),Tcb{:,:},1,'stacked','LineStyle','none');
    ylim([0 max(ylim)+2])
    set(h, {'FaceColor'}, num2cell(tempcol(1:length(subsubtypes),:),2));    
    grid on
    % label all even years
    ind = find(Tcb.Time.Month==1 & mod(Tcb.Time.Year,2)==0);
    xticks(ind)
    xticklabels(Tcb.Time.Year(ind))    
    legend(subsubtypes,'Location','EastOutside','NumColumns',1)
    title(cblist{i})
    set(gcf,'Units','centimeters', 'Position', [0 0 17 9],'PaperUnits','centimeters','PaperSize',[17 9])
    set(gca(), 'LooseInset', get(gca(), 'TightInset')+[0 -.05 .02 0]);
end

%% number of central bank events by intraday time
Tcb_t = timetable('RowTimes',duration(unique(Tevents.eventstart.Hour),0,0));

for i=1:length(cblist)
    [ia,~,ic] = unique(Tevents.eventstart.Hour(strcmp(Tevents.type,'Central Bank') & ...
        strcmp(Tevents.subtype,cblist{i})));
    Tcb_t = outerjoin(Tcb_t,array2timetable(accumarray(ic,1),'RowTimes',duration(ia,0,0),'VariableNames',cblist(i)));
end
figure;
h = bar(hour(Tcb_t.Time),Tcb_t{:,:},1,'stacked','LineStyle','none');
set(h, {'FaceColor'}, num2cell(tempcol(1:length(cblist),:),2));    
grid on    
legend(cblist,'Location','EastOutside','NumColumns',1)
title('Intraday Times of Central Bank Events')
set(gcf,'Units','centimeters', 'Position', [0 0 17 9],'PaperUnits','centimeters','PaperSize',[17 9])
set(gca(), 'LooseInset', get(gca(), 'TightInset')+[0 -.05 .02 0]);
xticks(0:1:23)
xlabel('Hour of Day (GMT)')

%%
close all





##### SOURCE END #####
--></body></html>